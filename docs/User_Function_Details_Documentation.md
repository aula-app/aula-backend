# Functions from User.php

| Function Name                     | Parameters                                                                                                                                                        | Description                                                                                                                    |
|:----------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------|
| __construct                       | $db, $crypt, $syslog                                                                                                                                              | only process script if variable $allowed_include is set to 1, otherwise exit this prevents direct call of this script          |
| getUserOrderId                    | $orderby                                                                                                                                                          | helper method that provides the db field name based on an int id (for ordering)                                                                                                             |
| validSearchField                  | $search_field                                                                                                                                                     | helper that defines valid / allowed search fields (db) returns true if ok                                                                                                    |
| getUserBaseData                   | $user_id                                                                                                                                                          | returns user base data for a specified db id                                                                                                       |
| getUserHashId                     | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| setUserProperty                   | $user_id, $property, $prop_value, $updater_id = 0                                                                                                                 | For further description look into code comments.                                                                                                       |
| revokeVoteRight                   | $user_id, $user_id_target, $topic_id, $updater_id                                                                                                                 | For further description look into code comments.                                                                                                       |
| delegateVoteRight                 | $user_id, $user_id_target, $topic_id, $updater_id                                                                                                                 | For further description look into code comments.                                                                                                       |
| changeGivenConsent                | $user_id, $inc_value = 1                                                                                                                                          | For further description look into code comments.                                                                                                       |
| giveConsent                       | $user_id, $text_id, $consent_value = 1, $updater_id = 0                                                                                                           | For further description look into code comments.                                                                                                       |
| getDelegationStatus               | $user_id, $topic_id                                                                                                                                               | For further description look into code comments.                                                                                                       |
| setDelegationStatus               | $user_id, $status, $topic_id = 0, $target = 0                                                                                                                     | bind all VALUES                                                                                                                |
| getReceivedDelegations            | $user_id, $topic_id                                                                                                                                               | For further description look into code comments.                                                                                                       |
| getGivenDelegations               | $user_id, $topic_id                                                                                                                                               | For further description look into code comments.                                                                                                       |
| getGivenConsents                  | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getNecessaryConsents              |                                                                                                                                                                   | For further description look into code comments.                                                                                                       |
| getMissingConsents                | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| checkHasUserGivenConsentsForUsage | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| giveBackAllDelegations            | $user_id, $topic_id = 0                                                                                                                                           | For further description look into code comments.                                                                                                       |
| giveBackDelegation                | $my_user_id, $user_id_original, $topic_id = 0                                                                                                                     | give back all delegations for a) a certain topic (topic id>0) or all delegations (topic_id=0)                                  |
| removeSpecificDelegation          | $user_id_target, $user_id_original, $topic_id = 0                                                                                                                 | give back delegations from a certain user ($user_id_original) for a) a certain topic (topic id>0) or all delegations (topic=0) |
| removeUserDelegations             | $user_id, $topic_id = 0, $target = 0                                                                                                                              | topic id is set to >0 -> delete only delegations for this user in the specified topic                                          |
| addUserToRoom                     | $user_id, $room_id, $status = 1, $updater_id = 0                                                                                                                  | For further description look into code comments.                                                                                                       |
| moveUserBetweenRooms              | $user_id, $room_id1, $room_id2, $updater_id                                                                                                                       | For further description look into code comments.                                                                                                       |
| moveUserBetweenGroups             | $user_id, $group_id1, $group_id2, $updater_id                                                                                                                     | For further description look into code comments.                                                                                                       |
| removeUserFromRoom                | $room_id, $user_id                                                                                                                                                | For further description look into code comments.                                                                                                       |
| followUser                        | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| friendUser                        | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| blockUser                         | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| unfriendUser                      | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| unblockUser                       | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| unfollowUser                      | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| relateUser                        | $user_id, $user_id_target, $status = 1, $updater_id = 0, $type = 1                                                                                                | For further description look into code comments.                                                                                                       |
| removeUserRelation                | $user_id, $user_id_target                                                                                                                                         | For further description look into code comments.                                                                                                       |
| removeUserFromGroup               | $group_id, $user_id                                                                                                                                               | For further description look into code comments.                                                                                                       |
| addCSV                            | $csv, $user_level = 20, $separator = ";"                                                                                                                          | For further description look into code comments.                                                                                                       |
| addUserToGroup                    | $user_id, $group_id, $updater_id, $status = 1                                                                                                                     | For further description look into code comments.                                                                                                       |
| checkLogin                        | $username, $pw                                                                                                                                                    | For further description look into code comments.                                                                                                       |
| checkCredentials                  | $username, $pw                                                                                                                                                    | For further description look into code comments.                                                                                                       |
| getUsers                          | $offset, $limit, $orderby = 0, $asc = 0, $both_names = "", $search_field = "", $search_text = "", $extra_where = "", $status = -1, $userlevel = -1, $room_id = -1 | For further description look into code comments.                                                                                                       |
| checkUserExistsByUsername         | $username, $email = ""                                                                                                                                            | For further description look into code comments.                                                                                                       |
| getUsersByRoom                    | $room_id, $status = -1, $offset = 0, $limit = 0, $orderby = 3, $asc = 0, $search_field = "", $search_text = "", $userlevel = -1                                   | generate blind index                                                                                                           |
| getUsersByGroup                   | $group_id, $status = -1, $offset = 0, $limit = 0, $orderby = 0, $asc = 0                                                                                          | pw generator                                                                                                                   |
| addUser                           | $realname, $displayname, $username, $email = "", $password = "", $status = 1, $about_me = "", $updater_id = 0, $userlevel = 10, $nomail = false                   | For further description look into code comments.                                                                                                       |
| editUser                          | $user_id, $realname, $displayname, $username, $email, $userlevel, $about_me = "", $position = "", $updater_id = 0, $status = 1                                    | For further description look into code comments.                                                                                                       |
| setUserAbsence                    | $user_id, $presence = 1, $absent_until = "", $auto_delegation = 0                                                                                                 | For further description look into code comments.                                                                                                       |
| setUserStatus                     | $user_id, $status, $updater_id = 0                                                                                                                                | For further description look into code comments.                                                                                                       |
| revokeConsent                     | $user_id, $text_id                                                                                                                                                | For further description look into code comments.                                                                                                       |
| setUserConsent                    | $user_id, $text_id, $consent, $status = 1, $updater_id = 0                                                                                                        | For further description look into code comments.                                                                                                       |
| grantInfiniteVotesToUser          | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| revokeInfiniteVotesFromUser       | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserInfiniteVotesStatus        | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserGDPRData                   | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserAbsence                    | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserLastLogin                  | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserLevel                      | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| getUserRooms                      | $user_id                                                                                                                                                          | For further description look into code comments.                                                                                                       |
| setUserInfiniteVote               | $user_id, $infinite, $updater_id = 0                                                                                                                              | For further description look into code comments.                                                                                                       |
| suspendUser                       | $user_id, $updater_id = 0                                                                                                                                         | For further description look into code comments.                                                                                                       |
| activateUser                      | $user_id, $updater_id = 0                                                                                                                                         | set user status to 2 = suspended set delegations for this user to suspended (delegated voting right and received votign right) |
| deactivateUser                    | $user_id, $updater_id = 0                                                                                                                                         | set user status to 1 = active set delegations for this user to suspended (delegated voting right and received votign right)    |
| archiveUser                       | $user_id, $archive_mode = 0, $updater_id = 0                                                                                                                      | set user status to 0 = inactive set delegations for this user to suspended (delegated voting right and received votign right)  |
| setUserLevel                      | $user_id, $userlevel = 10, $updater_id = 0                                                                                                                        | For further description look into code comments.                                                                                                       |
| setUserAbout                      | $user_id, $about_me, $updater_id = 0                                                                                                                              | For further description look into code comments.                                                                                                       |
| setUserPosition                   | $user_id, $userposition, $updater_id = 0                                                                                                                          | For further description look into code comments.                                                                                                       |
| setUserRealname                   | $user_id, $realname, $updater_id = 0                                                                                                                              | For further description look into code comments.                                                                                                       |
| setUserDisplayname                | $user_id, $displayname, $updater_id = 0                                                                                                                           | For further description look into code comments.                                                                                                       |
| setUserEmail                      | $user_id, $email, $updater_id = 0                                                                                                                                 | For further description look into code comments.                                                                                                       |
| setUserUsername                   | $user_id, $username, $updater_id = 0                                                                                                                              | For further description look into code comments.                                                                                                       |
| setUserPW                         | $user_id, $pw, $updater_id = 0                                                                                                                                    | For further description look into code comments.                                                                                                       |
| setUserRegStatus                  | $user_id, $regstatus, $updater_id = 0                                                                                                                             | For further description look into code comments.                                                                                                       |
| deleteUser                        | $user_id, $delete_mode = 0, $updater_id = 0                                                                                                                       | For further description look into code comments.                                                                                                       |

# Summary of Functionalities


The `User.php` file manages user-related operations within the system. Key functionalities include:

- **User Management**:
  - Creating, updating, and deleting user accounts.
  - Handling user-specific details, preferences, and statuses.

- **Data Retrieval**:
  - Fetching user-related data, such as profiles, roles, and activity logs.

- **Authentication and Permissions**:
  - Managing user authentication, roles, and access permissions.

- **Validation and Security**:
  - Ensuring the accuracy and security of user data during interactions.

This file is essential for maintaining and organizing user operations effectively within the application.
